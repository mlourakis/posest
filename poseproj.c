/* Code automatically generated by maple's codegen package */

/* Computation of 3D point projection and Jacobian for pose estimation */

#include "poseproj.h"

#include <math.h>
void calc_poseProjRT(double K[9],double rt[6],double M[3],double m[2])
{
  double t10;
  double t11;
  double t12;
  double t13;
  double t14;
  double t18;
  double t2;
  double t20;
  double t22;
  double t23;
  double t24;
  double t26;
  double t28;
  double t3;
  double t30;
  double t32;
  double t34;
  double t4;
  double t41;
  double t43;
  double t46;
  double t5;
  double t53;
  double t6;
  double t65;
  double t7;
  double t8;
  double t9;
  {
    t2 = rt[0];
    t3 = t2*t2;
    t4 = rt[1];
    t5 = t4*t4;
    t6 = rt[2];
    t7 = t6*t6;
    t8 = t3+t5+t7;
    t9 = sqrt(t8);
    t10 = cos(t9);
    t11 = 1.0-t10;
    t12 = 1/t8;
    t13 = t12*t7;
    t14 = t12*t5;
    t18 = M[0];
    t20 = sin(t9);
    t22 = t20/t9;
    t23 = t22*t6;
    t24 = t11*t12;
    t26 = t24*t4*t2;
    t28 = M[1];
    t30 = t22*t4;
    t32 = t24*t6*t2;
    t34 = M[2];
    t41 = t22*t2;
    t43 = t24*t6*t4;
    t46 = t12*t3;
    t53 = 1/((-t30+t32)*t18+(t41+t43)*t28+(1.0+t11*(-t14-t46))*t34+rt[5]);
    t65 = (t23+t26)*t18+(1.0+t11*(-t13-t46))*t28+(-t41+t43)*t34+rt[4];
    m[0] = K[0]*((1.0+t11*(-t13-t14))*t18+(-t23+t26)*t28+(t30+t32)*t34+rt[3])*
t53+K[1]*t65*t53+K[2];
    m[1] = K[4]*t65*t53+K[5];
    return;
  }
}

#include <math.h>
void calc_poseProjRTJac(double K[9],double rt[6],double M[3],double m_grad0[6],
double m_grad1[6])
{
  double t1;
  double t10;
  double t100;
  double t102;
  double t108;
  double t109;
  double t116;
  double t118;
  double t12;
  double t121;
  double t13;
  double t131;
  double t14;
  double t142;
  double t143;
  double t147;
  double t149;
  double t15;
  double t150;
  double t156;
  double t157;
  double t158;
  double t159;
  double t16;
  double t161;
  double t162;
  double t165;
  double t166;
  double t174;
  double t175;
  double t177;
  double t182;
  double t183;
  double t19;
  double t190;
  double t2;
  double t20;
  double t203;
  double t21;
  double t210;
  double t211;
  double t212;
  double t218;
  double t219;
  double t22;
  double t222;
  double t223;
  double t225;
  double t23;
  double t233;
  double t234;
  double t236;
  double t24;
  double t241;
  double t248;
  double t25;
  double t26;
  double t261;
  double t267;
  double t270;
  double t3;
  double t31;
  double t33;
  double t34;
  double t35;
  double t38;
  double t39;
  double t4;
  double t40;
  double t41;
  double t42;
  double t44;
  double t45;
  double t46;
  double t48;
  double t5;
  double t50;
  double t51;
  double t52;
  double t53;
  double t54;
  double t56;
  double t57;
  double t59;
  double t6;
  double t63;
  double t64;
  double t67;
  double t68;
  double t69;
  double t7;
  double t72;
  double t73;
  double t78;
  double t79;
  double t8;
  double t84;
  double t85;
  double t9;
  double t92;
  double t93;
  double t94;
  double t97;
  double t98;
  double t99;
  {
    t1 = K[0];
    t2 = rt[0];
    t3 = t2*t2;
    t4 = rt[1];
    t5 = t4*t4;
    t6 = rt[2];
    t7 = t6*t6;
    t8 = t3+t5+t7;
    t9 = sqrt(t8);
    t10 = sin(t9);
    t12 = t10/t9;
    t13 = 1/t8;
    t14 = t13*t7;
    t15 = t13*t5;
    t16 = -t14-t15;
    t19 = cos(t9);
    t20 = 1.0-t19;
    t21 = t8*t8;
    t22 = 1/t21;
    t23 = t22*t7;
    t24 = t23*t2;
    t25 = t22*t5;
    t26 = t25*t2;
    t31 = M[0];
    t33 = t19*t13;
    t34 = t2*t6;
    t35 = t33*t34;
    t38 = t10/t9/t8;
    t39 = t38*t34;
    t40 = t3*t4;
    t41 = t38*t40;
    t42 = t20*t22;
    t44 = 2.0*t42*t40;
    t45 = t20*t13;
    t46 = t45*t4;
    t48 = M[1];
    t50 = t2*t4;
    t51 = t33*t50;
    t52 = t38*t50;
    t53 = t3*t6;
    t54 = t38*t53;
    t56 = 2.0*t42*t53;
    t57 = t45*t6;
    t59 = M[2];
    t63 = t12*t4;
    t64 = t45*t34;
    t67 = t12*t2;
    t68 = t6*t4;
    t69 = t45*t68;
    t72 = t13*t3;
    t73 = -t15-t72;
    t78 = (-t63+t64)*t31+(t67+t69)*t48+(1.0+t20*t73)*t59+rt[5];
    t79 = 1/t78;
    t84 = t12*t6;
    t85 = t45*t50;
    t92 = t1*((1.0+t20*t16)*t31+(-t84+t85)*t48+(t63+t64)*t59+rt[3]);
    t93 = t78*t78;
    t94 = 1/t93;
    t97 = t33*t3;
    t98 = t38*t3;
    t99 = t34*t4;
    t100 = t38*t99;
    t102 = 2.0*t42*t99;
    t108 = t22*t3*t2;
    t109 = t13*t2;
    t116 = t94*((-t51+t52+t54-t56+t57)*t31+(t97-t98+t12+t100-t102)*t48+(t12*t2*
t73+t20*(2.0*t26+2.0*t108-2.0*t109))*t59);
    t118 = K[1];
    t121 = -t14-t72;
    t131 = (t35-t39+t41-t44+t46)*t31+(t12*t2*t121+t20*(2.0*t24+2.0*t108-2.0*
t109))*t48+(-t97+t98-t12+t100-t102)*t59;
    t142 = (t84+t85)*t31+(1.0+t20*t121)*t48+(-t67+t69)*t59+rt[4];
    t143 = t118*t142;
    m_grad0[0] = t1*((t12*t2*t16+t20*(2.0*t24+2.0*t26))*t31+(-t35+t39+t41-t44+
t46)*t48+(t51-t52+t54-t56+t57)*t59)*t79-t92*t116+t118*t131*t79-t143*t116;
    t147 = t23*t4;
    t149 = t22*t5*t4;
    t150 = t13*t4;
    t156 = t33*t68;
    t157 = t38*t68;
    t158 = t5*t2;
    t159 = t38*t158;
    t161 = 2.0*t42*t158;
    t162 = t45*t2;
    t165 = t33*t5;
    t166 = t38*t5;
    t174 = t5*t6;
    t175 = t38*t174;
    t177 = 2.0*t42*t174;
    t182 = t22*t3;
    t183 = t182*t4;
    t190 = t94*((-t165+t166-t12+t100-t102)*t31+(t51-t52+t175-t177+t57)*t48+(t12
*t4*t73+t20*(2.0*t149-2.0*t150+2.0*t183))*t59);
    t203 = (t156-t157+t159-t161+t162)*t31+(t12*t4*t121+t20*(2.0*t147+2.0*t183))
*t48+(-t51+t52+t175-t177+t57)*t59;
    m_grad0[1] = t1*((t12*t4*t16+t20*(2.0*t147+2.0*t149-2.0*t150))*t31+(-t156+
t157+t159-t161+t162)*t48+(t165-t166+t12+t100-t102)*t59)*t79-t92*t190+t118*t203*
t79-t143*t190;
    t210 = t22*t7*t6;
    t211 = t13*t6;
    t212 = t25*t6;
    t218 = t33*t7;
    t219 = t38*t7;
    t222 = t7*t2;
    t223 = t38*t222;
    t225 = 2.0*t42*t222;
    t233 = t7*t4;
    t234 = t38*t233;
    t236 = 2.0*t42*t233;
    t241 = t182*t6;
    t248 = t94*((-t156+t157+t223-t225+t162)*t31+(t35-t39+t234-t236+t46)*t48+(
t12*t6*t73+t20*(2.0*t212+2.0*t241))*t59);
    t261 = (t218-t219+t12+t100-t102)*t31+(t12*t6*t121+t20*(2.0*t210-2.0*t211+
2.0*t241))*t48+(-t35+t39+t234-t236+t46)*t59;
    m_grad0[2] = t1*((t12*t6*t16+t20*(2.0*t210-2.0*t211+2.0*t212))*t31+(-t218+
t219-t12+t100-t102)*t48+(t156-t157+t223-t225+t162)*t59)*t79-t92*t248+t118*t261*
t79-t143*t248;
    m_grad0[3] = t1*t79;
    m_grad0[4] = t118*t79;
    m_grad0[5] = -t92*t94-t143*t94;
    t267 = K[4];
    t270 = t267*t142;
    m_grad1[0] = t267*t131*t79-t270*t116;
    m_grad1[1] = t267*t203*t79-t270*t190;
    m_grad1[2] = t267*t261*t79-t270*t248;
    m_grad1[3] = 0.0;
    m_grad1[4] = t267*t79;
    m_grad1[5] = -t270*t94;
    return;
  }
}

#include <math.h>
void calc_poseProjRTScaleJac(double K[9],double rt[6],double scl[1],
double M[3],double m_grad0[7],double m_grad1[7])
{
  double t1;
  double t10;
  double t102;
  double t103;
  double t104;
  double t108;
  double t109;
  double t110;
  double t111;
  double t113;
  double t12;
  double t120;
  double t121;
  double t129;
  double t13;
  double t131;
  double t135;
  double t14;
  double t147;
  double t15;
  double t150;
  double t154;
  double t157;
  double t16;
  double t161;
  double t162;
  double t166;
  double t168;
  double t169;
  double t176;
  double t177;
  double t178;
  double t179;
  double t181;
  double t182;
  double t186;
  double t187;
  double t19;
  double t197;
  double t198;
  double t2;
  double t20;
  double t200;
  double t206;
  double t207;
  double t21;
  double t215;
  double t22;
  double t23;
  double t231;
  double t238;
  double t239;
  double t24;
  double t240;
  double t247;
  double t248;
  double t25;
  double t252;
  double t253;
  double t255;
  double t26;
  double t265;
  double t266;
  double t268;
  double t274;
  double t282;
  double t298;
  double t3;
  double t31;
  double t314;
  double t319;
  double t323;
  double t326;
  double t33;
  double t35;
  double t36;
  double t37;
  double t4;
  double t40;
  double t41;
  double t42;
  double t43;
  double t44;
  double t46;
  double t47;
  double t48;
  double t5;
  double t51;
  double t53;
  double t54;
  double t55;
  double t56;
  double t57;
  double t59;
  double t6;
  double t60;
  double t63;
  double t67;
  double t68;
  double t69;
  double t7;
  double t72;
  double t73;
  double t74;
  double t75;
  double t78;
  double t79;
  double t8;
  double t81;
  double t85;
  double t86;
  double t89;
  double t9;
  double t92;
  double t93;
  double t94;
  double t97;
  {
    t1 = K[0];
    t2 = rt[0];
    t3 = t2*t2;
    t4 = rt[1];
    t5 = t4*t4;
    t6 = rt[2];
    t7 = t6*t6;
    t8 = t3+t5+t7;
    t9 = sqrt(t8);
    t10 = sin(t9);
    t12 = t10/t9;
    t13 = 1/t8;
    t14 = t13*t7;
    t15 = t13*t5;
    t16 = -t14-t15;
    t19 = cos(t9);
    t20 = 1.0-t19;
    t21 = t8*t8;
    t22 = 1/t21;
    t23 = t22*t7;
    t24 = t23*t2;
    t25 = t22*t5;
    t26 = t25*t2;
    t31 = scl[0];
    t33 = M[0];
    t35 = t19*t13;
    t36 = t2*t6;
    t37 = t35*t36;
    t40 = t10/t9/t8;
    t41 = t36*t40;
    t42 = t3*t4;
    t43 = t42*t40;
    t44 = t20*t22;
    t46 = 2.0*t44*t42;
    t47 = t20*t13;
    t48 = t47*t4;
    t51 = M[1];
    t53 = t2*t4;
    t54 = t35*t53;
    t55 = t40*t53;
    t56 = t3*t6;
    t57 = t40*t56;
    t59 = 2.0*t44*t56;
    t60 = t47*t6;
    t63 = M[2];
    t67 = t12*t4;
    t68 = t36*t47;
    t69 = -t67+t68;
    t72 = t12*t2;
    t73 = t6*t4;
    t74 = t47*t73;
    t75 = t72+t74;
    t78 = t13*t3;
    t79 = -t15-t78;
    t81 = 1.0+t20*t79;
    t85 = t69*t31*t33+t75*t31*t51+t81*t31*t63+rt[5];
    t86 = 1/t85;
    t89 = 1.0+t20*t16;
    t92 = t12*t6;
    t93 = t47*t53;
    t94 = -t92+t93;
    t97 = t67+t68;
    t102 = t1*(t89*t31*t33+t94*t31*t51+t97*t31*t63+rt[3]);
    t103 = t85*t85;
    t104 = 1/t103;
    t108 = t35*t3;
    t109 = t40*t3;
    t110 = t36*t4;
    t111 = t40*t110;
    t113 = 2.0*t44*t110;
    t120 = t22*t3*t2;
    t121 = t13*t2;
    t129 = t104*((-t54+t55+t57-t59+t60)*t31*t33+(t108-t109+t12+t111-t113)*t31*
t51+(t12*t2*t79+t20*(2.0*t26+2.0*t120-2.0*t121))*t31*t63);
    t131 = K[1];
    t135 = -t14-t78;
    t147 = (t37-t41+t43-t46+t48)*t31*t33+(t12*t2*t135+t20*(2.0*t24+2.0*t120-2.0
*t121))*t31*t51+(-t108+t109-t12+t111-t113)*t31*t63;
    t150 = t92+t93;
    t154 = 1.0+t20*t135;
    t157 = -t72+t74;
    t161 = t150*t31*t33+t154*t31*t51+t157*t31*t63+rt[4];
    t162 = t131*t161;
    m_grad0[0] = t1*((t12*t2*t16+t20*(2.0*t24+2.0*t26))*t31*t33+(-t37+t41+t43-
t46+t48)*t31*t51+(t54-t55+t57-t59+t60)*t31*t63)*t86-t102*t129+t131*t147*t86-
t162*t129;
    t166 = t23*t4;
    t168 = t22*t5*t4;
    t169 = t13*t4;
    t176 = t35*t73;
    t177 = t73*t40;
    t178 = t5*t2;
    t179 = t40*t178;
    t181 = 2.0*t178*t44;
    t182 = t47*t2;
    t186 = t5*t35;
    t187 = t5*t40;
    t197 = t5*t6;
    t198 = t40*t197;
    t200 = 2.0*t44*t197;
    t206 = t22*t3;
    t207 = t206*t4;
    t215 = t104*((-t186+t187-t12+t111-t113)*t31*t33+(t54-t55+t198-t200+t60)*t31
*t51+(t12*t4*t79+t20*(2.0*t168-2.0*t169+2.0*t207))*t31*t63);
    t231 = (t176-t177+t179-t181+t182)*t31*t33+(t12*t4*t135+t20*(2.0*t166+2.0*
t207))*t31*t51+(-t54+t55+t198-t200+t60)*t31*t63;
    m_grad0[1] = t1*((t12*t4*t16+t20*(2.0*t166+2.0*t168-2.0*t169))*t31*t33+(-
t176+t177+t179-t181+t182)*t31*t51+(t186-t187+t12+t111-t113)*t31*t63)*t86-t102*
t215+t131*t231*t86-t162*t215;
    t238 = t22*t7*t6;
    t239 = t13*t6;
    t240 = t25*t6;
    t247 = t35*t7;
    t248 = t40*t7;
    t252 = t7*t2;
    t253 = t40*t252;
    t255 = 2.0*t44*t252;
    t265 = t7*t4;
    t266 = t40*t265;
    t268 = 2.0*t44*t265;
    t274 = t206*t6;
    t282 = t104*((-t176+t177+t253-t255+t182)*t31*t33+(t37-t41+t266-t268+t48)*
t31*t51+(t12*t6*t79+t20*(2.0*t240+2.0*t274))*t31*t63);
    t298 = (t247-t248+t12+t111-t113)*t31*t33+(t12*t6*t135+t20*(2.0*t238-2.0*
t239+2.0*t274))*t31*t51+(-t37+t41+t266-t268+t48)*t31*t63;
    m_grad0[2] = t1*((t12*t6*t16+t20*(2.0*t238-2.0*t239+2.0*t240))*t31*t33+(-
t247+t248-t12+t111-t113)*t31*t51+(t176-t177+t253-t255+t182)*t31*t63)*t86-t102*
t282+t131*t298*t86-t162*t282;
    m_grad0[3] = t1*t86;
    m_grad0[4] = t131*t86;
    m_grad0[5] = -t102*t104-t162*t104;
    t314 = t104*(t69*t33+t75*t51+t81*t63);
    t319 = t150*t33+t154*t51+t157*t63;
    m_grad0[6] = t1*(t89*t33+t94*t51+t97*t63)*t86-t102*t314+t131*t319*t86-t162*
t314;
    t323 = K[4];
    t326 = t323*t161;
    m_grad1[0] = t323*t147*t86-t326*t129;
    m_grad1[1] = t323*t231*t86-t326*t215;
    m_grad1[2] = t323*t298*t86-t326*t282;
    m_grad1[3] = 0.0;
    m_grad1[4] = t323*t86;
    m_grad1[5] = -t326*t104;
    m_grad1[6] = t323*t319*t86-t326*t314;
    return;
  }
}

#include <math.h>
void calc_poseProjRTF(double rtf[7],double u0v0[2],double M[3],double m[2])
{
  double t1;
  double t10;
  double t11;
  double t12;
  double t13;
  double t14;
  double t18;
  double t2;
  double t20;
  double t22;
  double t23;
  double t24;
  double t26;
  double t28;
  double t3;
  double t30;
  double t32;
  double t34;
  double t4;
  double t41;
  double t43;
  double t46;
  double t5;
  double t53;
  double t6;
  double t7;
  double t8;
  double t9;
  {
    t1 = rtf[6];
    t2 = rtf[0];
    t3 = t2*t2;
    t4 = rtf[1];
    t5 = t4*t4;
    t6 = rtf[2];
    t7 = t6*t6;
    t8 = t3+t5+t7;
    t9 = sqrt(t8);
    t10 = cos(t9);
    t11 = 1.0-t10;
    t12 = 1/t8;
    t13 = t12*t7;
    t14 = t12*t5;
    t18 = M[0];
    t20 = sin(t9);
    t22 = t20/t9;
    t23 = t22*t6;
    t24 = t11*t12;
    t26 = t24*t4*t2;
    t28 = M[1];
    t30 = t22*t4;
    t32 = t24*t6*t2;
    t34 = M[2];
    t41 = t22*t2;
    t43 = t24*t6*t4;
    t46 = t12*t3;
    t53 = 1/((-t30+t32)*t18+(t41+t43)*t28+(1.0+t11*(-t14-t46))*t34+rtf[5]);
    m[0] = t1*((1.0+t11*(-t13-t14))*t18+(-t23+t26)*t28+(t30+t32)*t34+rtf[3])*
t53+u0v0[0];
    m[1] = t1*((t23+t26)*t18+(1.0+t11*(-t13-t46))*t28+(-t41+t43)*t34+rtf[4])*
t53+u0v0[1];
    return;
  }
}

#include <math.h>
void calc_poseProjRTFJac(double rtf[7],double u0v0[2],double M[3],
double m_grad0[7],double m_grad1[7])
{
  double t1;
  double t10;
  double t100;
  double t102;
  double t108;
  double t109;
  double t116;
  double t12;
  double t120;
  double t122;
  double t123;
  double t129;
  double t13;
  double t130;
  double t131;
  double t132;
  double t134;
  double t135;
  double t138;
  double t139;
  double t14;
  double t147;
  double t148;
  double t15;
  double t150;
  double t155;
  double t156;
  double t16;
  double t163;
  double t168;
  double t169;
  double t170;
  double t176;
  double t177;
  double t180;
  double t181;
  double t183;
  double t19;
  double t191;
  double t192;
  double t194;
  double t199;
  double t2;
  double t20;
  double t206;
  double t21;
  double t211;
  double t22;
  double t23;
  double t232;
  double t233;
  double t24;
  double t25;
  double t26;
  double t3;
  double t31;
  double t33;
  double t34;
  double t35;
  double t38;
  double t39;
  double t4;
  double t40;
  double t41;
  double t42;
  double t44;
  double t45;
  double t46;
  double t48;
  double t5;
  double t50;
  double t51;
  double t52;
  double t53;
  double t54;
  double t56;
  double t57;
  double t59;
  double t6;
  double t63;
  double t64;
  double t67;
  double t68;
  double t69;
  double t7;
  double t72;
  double t73;
  double t78;
  double t79;
  double t8;
  double t84;
  double t85;
  double t9;
  double t91;
  double t92;
  double t93;
  double t94;
  double t97;
  double t98;
  double t99;
  {
    t1 = rtf[6];
    t2 = rtf[0];
    t3 = t2*t2;
    t4 = rtf[1];
    t5 = t4*t4;
    t6 = rtf[2];
    t7 = t6*t6;
    t8 = t3+t5+t7;
    t9 = sqrt(t8);
    t10 = sin(t9);
    t12 = t10/t9;
    t13 = 1/t8;
    t14 = t13*t7;
    t15 = t13*t5;
    t16 = -t14-t15;
    t19 = cos(t9);
    t20 = 1.0-t19;
    t21 = t8*t8;
    t22 = 1/t21;
    t23 = t22*t7;
    t24 = t23*t2;
    t25 = t22*t5;
    t26 = t25*t2;
    t31 = M[0];
    t33 = t19*t13;
    t34 = t2*t6;
    t35 = t33*t34;
    t38 = t10/t9/t8;
    t39 = t38*t34;
    t40 = t3*t4;
    t41 = t38*t40;
    t42 = t20*t22;
    t44 = 2.0*t42*t40;
    t45 = t20*t13;
    t46 = t45*t4;
    t48 = M[1];
    t50 = t2*t4;
    t51 = t33*t50;
    t52 = t38*t50;
    t53 = t3*t6;
    t54 = t38*t53;
    t56 = 2.0*t42*t53;
    t57 = t45*t6;
    t59 = M[2];
    t63 = t12*t4;
    t64 = t45*t34;
    t67 = t12*t2;
    t68 = t6*t4;
    t69 = t45*t68;
    t72 = t13*t3;
    t73 = -t15-t72;
    t78 = (-t63+t64)*t31+(t67+t69)*t48+(1.0+t20*t73)*t59+rtf[5];
    t79 = 1/t78;
    t84 = t6*t12;
    t85 = t45*t50;
    t91 = (1.0+t20*t16)*t31+(-t84+t85)*t48+(t63+t64)*t59+rtf[3];
    t92 = t1*t91;
    t93 = t78*t78;
    t94 = 1/t93;
    t97 = t33*t3;
    t98 = t38*t3;
    t99 = t34*t4;
    t100 = t38*t99;
    t102 = 2.0*t42*t99;
    t108 = t22*t3*t2;
    t109 = t13*t2;
    t116 = t94*((-t51+t52+t54-t56+t57)*t31+(t97-t98+t12+t100-t102)*t48+(t12*t2*
t73+t20*(2.0*t26+2.0*t108-2.0*t109))*t59);
    m_grad0[0] = t1*((t12*t2*t16+t20*(2.0*t24+2.0*t26))*t31+(-t35+t39+t41-t44+
t46)*t48+(t51-t52+t54-t56+t57)*t59)*t79-t92*t116;
    t120 = t23*t4;
    t122 = t22*t5*t4;
    t123 = t13*t4;
    t129 = t33*t68;
    t130 = t38*t68;
    t131 = t5*t2;
    t132 = t38*t131;
    t134 = 2.0*t42*t131;
    t135 = t45*t2;
    t138 = t33*t5;
    t139 = t38*t5;
    t147 = t5*t6;
    t148 = t38*t147;
    t150 = 2.0*t42*t147;
    t155 = t22*t3;
    t156 = t155*t4;
    t163 = t94*((-t138+t139-t12+t100-t102)*t31+(t51-t52+t148-t150+t57)*t48+(t12
*t4*t73+t20*(2.0*t122-2.0*t123+2.0*t156))*t59);
    m_grad0[1] = t1*((t12*t4*t16+t20*(2.0*t120+2.0*t122-2.0*t123))*t31+(-t129+
t130+t132-t134+t135)*t48+(t138-t139+t12+t100-t102)*t59)*t79-t92*t163;
    t168 = t22*t7*t6;
    t169 = t13*t6;
    t170 = t25*t6;
    t176 = t33*t7;
    t177 = t38*t7;
    t180 = t7*t2;
    t181 = t38*t180;
    t183 = 2.0*t42*t180;
    t191 = t7*t4;
    t192 = t38*t191;
    t194 = 2.0*t42*t191;
    t199 = t155*t6;
    t206 = t94*((-t129+t130+t181-t183+t135)*t31+(t35-t39+t192-t194+t46)*t48+(
t12*t6*t73+t20*(2.0*t170+2.0*t199))*t59);
    m_grad0[2] = t1*((t12*t6*t16+t20*(2.0*t168-2.0*t169+2.0*t170))*t31+(-t176+
t177-t12+t100-t102)*t48+(t129-t130+t181-t183+t135)*t59)*t79-t92*t206;
    m_grad0[3] = t1*t79;
    m_grad0[4] = 0.0;
    m_grad0[5] = -t92*t94;
    m_grad0[6] = t91*t79;
    t211 = -t14-t72;
    t232 = (t84+t85)*t31+(1.0+t20*t211)*t48+(-t67+t69)*t59+rtf[4];
    t233 = t1*t232;
    m_grad1[0] = t1*((t35-t39+t41-t44+t46)*t31+(t12*t2*t211+t20*(2.0*t24+2.0*
t108-2.0*t109))*t48+(-t97+t98-t12+t100-t102)*t59)*t79-t116*t233;
    m_grad1[1] = t1*((t129-t130+t132-t134+t135)*t31+(t12*t4*t211+t20*(2.0*t120+
2.0*t156))*t48+(-t51+t52+t148-t150+t57)*t59)*t79-t233*t163;
    m_grad1[2] = t1*((t176-t177+t12+t100-t102)*t31+(t12*t6*t211+t20*(2.0*t168
-2.0*t169+2.0*t199))*t48+(-t35+t39+t192-t194+t46)*t59)*t79-t233*t206;
    m_grad1[3] = 0.0;
    m_grad1[4] = m_grad0[3];
    m_grad1[5] = -t233*t94;
    m_grad1[6] = t232*t79;
    return;
  }
}

#include <math.h>
void calc_poseProjRTBinocJac(double KR[9],double rtL[6],double stereo_rt[6],
double M[3],double mR_grad0[6],double mR_grad1[6])
{
  double t1;
  double t10;
  double t101;
  double t103;
  double t104;
  double t105;
  double t106;
  double t108;
  double t109;
  double t11;
  double t112;
  double t114;
  double t116;
  double t118;
  double t12;
  double t124;
  double t127;
  double t13;
  double t131;
  double t133;
  double t135;
  double t137;
  double t138;
  double t139;
  double t14;
  double t140;
  double t141;
  double t143;
  double t146;
  double t147;
  double t148;
  double t149;
  double t153;
  double t156;
  double t158;
  double t159;
  double t160;
  double t161;
  double t165;
  double t167;
  double t17;
  double t170;
  double t174;
  double t176;
  double t178;
  double t18;
  double t181;
  double t182;
  double t19;
  double t2;
  double t20;
  double t204;
  double t205;
  double t206;
  double t21;
  double t22;
  double t223;
  double t225;
  double t226;
  double t23;
  double t230;
  double t232;
  double t24;
  double t246;
  double t25;
  double t26;
  double t268;
  double t269;
  double t273;
  double t275;
  double t276;
  double t28;
  double t280;
  double t282;
  double t283;
  double t284;
  double t285;
  double t287;
  double t288;
  double t289;
  double t29;
  double t291;
  double t292;
  double t293;
  double t297;
  double t3;
  double t30;
  double t301;
  double t302;
  double t306;
  double t308;
  double t309;
  double t31;
  double t311;
  double t312;
  double t316;
  double t318;
  double t32;
  double t325;
  double t348;
  double t35;
  double t36;
  double t365;
  double t37;
  double t372;
  double t373;
  double t374;
  double t378;
  double t38;
  double t380;
  double t381;
  double t382;
  double t384;
  double t385;
  double t387;
  double t388;
  double t39;
  double t392;
  double t396;
  double t4;
  double t40;
  double t400;
  double t402;
  double t403;
  double t405;
  double t406;
  double t41;
  double t410;
  double t412;
  double t419;
  double t42;
  double t442;
  double t459;
  double t46;
  double t465;
  double t472;
  double t479;
  double t48;
  double t484;
  double t487;
  double t5;
  double t50;
  double t51;
  double t52;
  double t54;
  double t55;
  double t56;
  double t57;
  double t58;
  double t6;
  double t61;
  double t62;
  double t63;
  double t64;
  double t65;
  double t67;
  double t68;
  double t69;
  double t7;
  double t70;
  double t72;
  double t74;
  double t75;
  double t76;
  double t77;
  double t78;
  double t79;
  double t8;
  double t80;
  double t82;
  double t83;
  double t84;
  double t87;
  double t89;
  double t9;
  double t91;
  double t92;
  double t96;
  double t97;
  {
    t1 = KR[0];
    t2 = stereo_rt[0];
    t3 = t2*t2;
    t4 = stereo_rt[1];
    t5 = t4*t4;
    t6 = stereo_rt[2];
    t7 = t6*t6;
    t8 = t3+t5+t7;
    t9 = sqrt(t8);
    t10 = cos(t9);
    t11 = 1.0-t10;
    t12 = 1/t8;
    t13 = t12*t7;
    t14 = t12*t5;
    t17 = 1.0+t11*(-t13-t14);
    t18 = rtL[0];
    t19 = t18*t18;
    t20 = rtL[1];
    t21 = t20*t20;
    t22 = rtL[2];
    t23 = t22*t22;
    t24 = t19+t21+t23;
    t25 = sqrt(t24);
    t26 = sin(t25);
    t28 = t26/t25;
    t29 = 1/t24;
    t30 = t29*t23;
    t31 = t29*t21;
    t32 = -t30-t31;
    t35 = cos(t25);
    t36 = 1.0-t35;
    t37 = t24*t24;
    t38 = 1/t37;
    t39 = t38*t23;
    t40 = t39*t18;
    t41 = t38*t21;
    t42 = t41*t18;
    t46 = t28*t18*t32+t36*(2.0*t40+2.0*t42);
    t48 = sin(t9);
    t50 = t48/t9;
    t51 = t50*t6;
    t52 = t11*t12;
    t54 = t52*t4*t2;
    t55 = -t51+t54;
    t56 = t35*t29;
    t57 = t18*t22;
    t58 = t56*t57;
    t61 = t26/t25/t24;
    t62 = t61*t57;
    t63 = t19*t20;
    t64 = t61*t63;
    t65 = t36*t38;
    t67 = 2.0*t65*t63;
    t68 = t36*t29;
    t69 = t68*t20;
    t70 = t58-t62+t64-t67+t69;
    t72 = t50*t4;
    t74 = t52*t6*t2;
    t75 = t72+t74;
    t76 = t18*t20;
    t77 = t56*t76;
    t78 = t61*t76;
    t79 = t19*t22;
    t80 = t61*t79;
    t82 = 2.0*t65*t79;
    t83 = t68*t22;
    t84 = -t77+t78+t80-t82+t83;
    t87 = M[0];
    t89 = -t58+t62+t64-t67+t69;
    t91 = t29*t19;
    t92 = -t30-t91;
    t96 = t38*t19*t18;
    t97 = t29*t18;
    t101 = t28*t18*t92+t36*(2.0*t40+2.0*t96-2.0*t97);
    t103 = t56*t19;
    t104 = t61*t19;
    t105 = t57*t20;
    t106 = t61*t105;
    t108 = 2.0*t65*t105;
    t109 = t103-t104+t28+t106-t108;
    t112 = M[1];
    t114 = t77-t78+t80-t82+t83;
    t116 = -t103+t104-t28+t106-t108;
    t118 = -t31-t91;
    t124 = t28*t18*t118+t36*(2.0*t42+2.0*t96-2.0*t97);
    t127 = M[2];
    t131 = -t72+t74;
    t133 = 1.0+t36*t32;
    t135 = t50*t2;
    t137 = t52*t6*t4;
    t138 = t135+t137;
    t139 = t28*t22;
    t140 = t68*t76;
    t141 = t139+t140;
    t143 = t12*t3;
    t146 = 1.0+t11*(-t14-t143);
    t147 = t28*t20;
    t148 = t68*t57;
    t149 = -t147+t148;
    t153 = -t139+t140;
    t156 = 1.0+t36*t92;
    t158 = t18*t28;
    t159 = t20*t22;
    t160 = t68*t159;
    t161 = t158+t160;
    t165 = t147+t148;
    t167 = -t158+t160;
    t170 = 1.0+t36*t118;
    t174 = rtL[3];
    t176 = rtL[4];
    t178 = rtL[5];
    t181 = (t131*t133+t138*t141+t146*t149)*t87+(t131*t153+t138*t156+t146*t161)*
t112+(t131*t165+t138*t167+t170*t146)*t127+t131*t174+t138*t176+t146*t178+
stereo_rt[5];
    t182 = 1/t181;
    t204 = t1*((t17*t133+t55*t141+t75*t149)*t87+(t17*t153+t55*t156+t75*t161)*
t112+(t17*t165+t55*t167+t75*t170)*t127+t17*t174+t55*t176+t75*t178+stereo_rt[3])
;
    t205 = t181*t181;
    t206 = 1/t205;
    t223 = t206*((t131*t46+t138*t70+t146*t84)*t87+(t131*t89+t138*t101+t146*t109
)*t112+(t131*t114+t138*t116+t146*t124)*t127);
    t225 = KR[1];
    t226 = t51+t54;
    t230 = 1.0+t11*(-t13-t143);
    t232 = -t135+t137;
    t246 = (t226*t46+t230*t70+t232*t84)*t87+(t226*t89+t230*t101+t109*t232)*t112
+(t226*t114+t116*t230+t232*t124)*t127;
    t268 = (t226*t133+t230*t141+t232*t149)*t87+(t226*t153+t230*t156+t232*t161)*
t112+(t226*t165+t230*t167+t232*t170)*t127+t226*t174+t230*t176+t232*t178+
stereo_rt[4];
    t269 = t268*t225;
    mR_grad0[0] = t1*((t17*t46+t55*t70+t75*t84)*t87+(t17*t89+t55*t101+t75*t109)
*t112+(t17*t114+t55*t116+t75*t124)*t127)*t182-t204*t223+t225*t246*t182-t269*
t223;
    t273 = t39*t20;
    t275 = t38*t21*t20;
    t276 = t29*t20;
    t280 = t28*t20*t32+t36*(2.0*t273+2.0*t275-2.0*t276);
    t282 = t56*t159;
    t283 = t61*t159;
    t284 = t21*t18;
    t285 = t61*t284;
    t287 = 2.0*t65*t284;
    t288 = t68*t18;
    t289 = t282-t283+t285-t287+t288;
    t291 = t56*t21;
    t292 = t61*t21;
    t293 = -t291+t292-t28+t106-t108;
    t297 = -t282+t283+t285-t287+t288;
    t301 = t38*t19;
    t302 = t301*t20;
    t306 = t28*t20*t92+t36*(2.0*t273+2.0*t302);
    t308 = t21*t22;
    t309 = t61*t308;
    t311 = 2.0*t65*t308;
    t312 = t77-t78+t309-t311+t83;
    t316 = t291-t292+t28+t106-t108;
    t318 = -t77+t78+t309-t311+t83;
    t325 = t28*t20*t118+t36*(2.0*t275-2.0*t276+2.0*t302);
    t348 = t206*((t131*t280+t138*t289+t146*t293)*t87+(t131*t297+t138*t306+t312*
t146)*t112+(t131*t316+t138*t318+t146*t325)*t127);
    t365 = (t226*t280+t230*t289+t232*t293)*t87+(t226*t297+t230*t306+t232*t312)*
t112+(t226*t316+t230*t318+t232*t325)*t127;
    mR_grad0[1] = t1*((t17*t280+t55*t289+t75*t293)*t87+(t297*t17+t55*t306+t75*
t312)*t112+(t17*t316+t55*t318+t75*t325)*t127)*t182-t204*t348+t225*t365*t182-
t269*t348;
    t372 = t38*t23*t22;
    t373 = t29*t22;
    t374 = t41*t22;
    t378 = t28*t22*t32+t36*(2.0*t372-2.0*t373+2.0*t374);
    t380 = t56*t23;
    t381 = t61*t23;
    t382 = t380-t381+t28+t106-t108;
    t384 = t23*t18;
    t385 = t61*t384;
    t387 = 2.0*t65*t384;
    t388 = -t282+t283+t385-t387+t288;
    t392 = -t380+t381-t28+t106-t108;
    t396 = t301*t22;
    t400 = t28*t22*t92+t36*(2.0*t372-2.0*t373+2.0*t396);
    t402 = t23*t20;
    t403 = t61*t402;
    t405 = 2.0*t65*t402;
    t406 = t58-t62+t403-t405+t69;
    t410 = t282-t283+t385-t387+t288;
    t412 = -t58+t62+t403-t405+t69;
    t419 = t28*t22*t118+t36*(2.0*t374+2.0*t396);
    t442 = t206*((t131*t378+t138*t382+t146*t388)*t87+(t131*t392+t138*t400+t146*
t406)*t112+(t131*t410+t138*t412+t146*t419)*t127);
    t459 = (t226*t378+t230*t382+t232*t388)*t87+(t226*t392+t230*t400+t232*t406)*
t112+(t226*t410+t230*t412+t232*t419)*t127;
    mR_grad0[2] = t1*((t17*t378+t55*t382+t75*t388)*t87+(t17*t392+t55*t400+t75*
t406)*t112+(t17*t410+t55*t412+t75*t419)*t127)*t182-t204*t442+t225*t459*t182-
t269*t442;
    t465 = t206*t131;
    mR_grad0[3] = t1*t17*t182-t204*t465+t225*t226*t182-t269*t465;
    t472 = t206*t138;
    mR_grad0[4] = t1*t55*t182-t204*t472+t225*t230*t182-t269*t472;
    t479 = t206*t146;
    mR_grad0[5] = t1*t75*t182-t204*t479+t225*t232*t182-t269*t479;
    t484 = KR[4];
    t487 = t484*t268;
    mR_grad1[0] = t484*t246*t182-t487*t223;
    mR_grad1[1] = t484*t365*t182-t487*t348;
    mR_grad1[2] = t484*t459*t182-t487*t442;
    mR_grad1[3] = t484*t226*t182-t487*t465;
    mR_grad1[4] = t484*t230*t182-t487*t472;
    mR_grad1[5] = t484*t232*t182-t487*t479;
    return;
  }
}

#include <math.h>
void calc_poseProjRTBinocScaleJac(double KR[9],double rtL[6],double scl[1],
double stereo_rt[6],double M[3],double mR_grad0[7],double mR_grad1[7])
{
  double t1;
  double t10;
  double t103;
  double t105;
  double t106;
  double t107;
  double t108;
  double t11;
  double t110;
  double t111;
  double t115;
  double t117;
  double t119;
  double t12;
  double t121;
  double t127;
  double t13;
  double t131;
  double t135;
  double t137;
  double t139;
  double t14;
  double t141;
  double t142;
  double t143;
  double t144;
  double t145;
  double t147;
  double t150;
  double t151;
  double t152;
  double t153;
  double t155;
  double t158;
  double t161;
  double t163;
  double t164;
  double t165;
  double t166;
  double t168;
  double t17;
  double t171;
  double t173;
  double t176;
  double t178;
  double t18;
  double t181;
  double t183;
  double t185;
  double t188;
  double t189;
  double t19;
  double t194;
  double t2;
  double t20;
  double t200;
  double t206;
  double t21;
  double t214;
  double t215;
  double t216;
  double t22;
  double t23;
  double t236;
  double t238;
  double t239;
  double t24;
  double t243;
  double t245;
  double t25;
  double t26;
  double t262;
  double t268;
  double t274;
  double t28;
  double t280;
  double t287;
  double t288;
  double t29;
  double t292;
  double t294;
  double t295;
  double t299;
  double t3;
  double t30;
  double t301;
  double t302;
  double t303;
  double t304;
  double t306;
  double t307;
  double t308;
  double t31;
  double t310;
  double t311;
  double t312;
  double t317;
  double t32;
  double t321;
  double t322;
  double t326;
  double t328;
  double t329;
  double t331;
  double t332;
  double t337;
  double t339;
  double t346;
  double t35;
  double t36;
  double t37;
  double t373;
  double t38;
  double t39;
  double t393;
  double t4;
  double t40;
  double t400;
  double t401;
  double t402;
  double t406;
  double t408;
  double t409;
  double t41;
  double t410;
  double t412;
  double t413;
  double t415;
  double t416;
  double t42;
  double t421;
  double t425;
  double t429;
  double t431;
  double t432;
  double t434;
  double t435;
  double t440;
  double t442;
  double t449;
  double t46;
  double t476;
  double t48;
  double t496;
  double t5;
  double t50;
  double t502;
  double t509;
  double t51;
  double t516;
  double t52;
  double t531;
  double t536;
  double t54;
  double t540;
  double t543;
  double t55;
  double t56;
  double t57;
  double t58;
  double t6;
  double t61;
  double t62;
  double t63;
  double t64;
  double t65;
  double t67;
  double t68;
  double t69;
  double t7;
  double t70;
  double t72;
  double t74;
  double t75;
  double t76;
  double t77;
  double t78;
  double t79;
  double t8;
  double t80;
  double t82;
  double t83;
  double t84;
  double t87;
  double t89;
  double t9;
  double t91;
  double t93;
  double t94;
  double t98;
  double t99;
  {
    t1 = KR[0];
    t2 = stereo_rt[0];
    t3 = t2*t2;
    t4 = stereo_rt[1];
    t5 = t4*t4;
    t6 = stereo_rt[2];
    t7 = t6*t6;
    t8 = t3+t5+t7;
    t9 = sqrt(t8);
    t10 = cos(t9);
    t11 = 1.0-t10;
    t12 = 1/t8;
    t13 = t12*t7;
    t14 = t12*t5;
    t17 = 1.0+t11*(-t13-t14);
    t18 = rtL[0];
    t19 = t18*t18;
    t20 = rtL[1];
    t21 = t20*t20;
    t22 = rtL[2];
    t23 = t22*t22;
    t24 = t19+t21+t23;
    t25 = sqrt(t24);
    t26 = sin(t25);
    t28 = t26/t25;
    t29 = 1/t24;
    t30 = t29*t23;
    t31 = t29*t21;
    t32 = -t30-t31;
    t35 = cos(t25);
    t36 = 1.0-t35;
    t37 = t24*t24;
    t38 = 1/t37;
    t39 = t38*t23;
    t40 = t39*t18;
    t41 = t38*t21;
    t42 = t41*t18;
    t46 = t28*t18*t32+t36*(2.0*t40+2.0*t42);
    t48 = sin(t9);
    t50 = t48/t9;
    t51 = t50*t6;
    t52 = t11*t12;
    t54 = t52*t4*t2;
    t55 = -t51+t54;
    t56 = t35*t29;
    t57 = t18*t22;
    t58 = t56*t57;
    t61 = t26/t25/t24;
    t62 = t61*t57;
    t63 = t19*t20;
    t64 = t61*t63;
    t65 = t36*t38;
    t67 = 2.0*t65*t63;
    t68 = t36*t29;
    t69 = t68*t20;
    t70 = t58-t62+t64-t67+t69;
    t72 = t50*t4;
    t74 = t52*t6*t2;
    t75 = t72+t74;
    t76 = t18*t20;
    t77 = t56*t76;
    t78 = t61*t76;
    t79 = t19*t22;
    t80 = t61*t79;
    t82 = 2.0*t65*t79;
    t83 = t68*t22;
    t84 = -t77+t78+t80-t82+t83;
    t87 = scl[0];
    t89 = M[0];
    t91 = -t58+t62+t64-t67+t69;
    t93 = t29*t19;
    t94 = -t30-t93;
    t98 = t38*t19*t18;
    t99 = t29*t18;
    t103 = t28*t18*t94+t36*(2.0*t40+2.0*t98-2.0*t99);
    t105 = t56*t19;
    t106 = t61*t19;
    t107 = t57*t20;
    t108 = t61*t107;
    t110 = 2.0*t65*t107;
    t111 = t105-t106+t28+t108-t110;
    t115 = M[1];
    t117 = t77-t78+t80-t82+t83;
    t119 = -t105+t106-t28+t108-t110;
    t121 = -t31-t93;
    t127 = t28*t18*t121+t36*(2.0*t42+2.0*t98-2.0*t99);
    t131 = M[2];
    t135 = -t72+t74;
    t137 = 1.0+t36*t32;
    t139 = t50*t2;
    t141 = t52*t6*t4;
    t142 = t139+t141;
    t143 = t28*t22;
    t144 = t68*t76;
    t145 = t143+t144;
    t147 = t12*t3;
    t150 = 1.0+t11*(-t14-t147);
    t151 = t28*t20;
    t152 = t68*t57;
    t153 = -t151+t152;
    t155 = t135*t137+t142*t145+t150*t153;
    t158 = -t143+t144;
    t161 = 1.0+t36*t94;
    t163 = t18*t28;
    t164 = t20*t22;
    t165 = t68*t164;
    t166 = t163+t165;
    t168 = t158*t135+t142*t161+t150*t166;
    t171 = t151+t152;
    t173 = -t163+t165;
    t176 = 1.0+t36*t121;
    t178 = t135*t171+t142*t173+t150*t176;
    t181 = rtL[3];
    t183 = rtL[4];
    t185 = rtL[5];
    t188 = t155*t87*t89+t168*t87*t115+t178*t87*t131+t135*t181+t142*t183+t150*
t185+stereo_rt[5];
    t189 = 1/t188;
    t194 = t17*t137+t55*t145+t75*t153;
    t200 = t17*t158+t55*t161+t75*t166;
    t206 = t17*t171+t55*t173+t75*t176;
    t214 = t1*(t194*t87*t89+t200*t87*t115+t206*t87*t131+t17*t181+t55*t183+t75*
t185+stereo_rt[3]);
    t215 = t188*t188;
    t216 = 1/t215;
    t236 = t216*((t135*t46+t142*t70+t150*t84)*t87*t89+(t135*t91+t142*t103+t150*
t111)*t87*t115+(t135*t117+t142*t119+t150*t127)*t87*t131);
    t238 = KR[1];
    t239 = t51+t54;
    t243 = 1.0+t11*(-t13-t147);
    t245 = -t139+t141;
    t262 = (t239*t46+t243*t70+t245*t84)*t87*t89+(t239*t91+t243*t103+t245*t111)*
t87*t115+(t239*t117+t243*t119+t127*t245)*t87*t131;
    t268 = t239*t137+t243*t145+t245*t153;
    t274 = t239*t158+t243*t161+t245*t166;
    t280 = t239*t171+t243*t173+t245*t176;
    t287 = t268*t87*t89+t274*t87*t115+t280*t87*t131+t239*t181+t183*t243+t245*
t185+stereo_rt[4];
    t288 = t238*t287;
    mR_grad0[0] = t1*((t17*t46+t55*t70+t75*t84)*t87*t89+(t17*t91+t55*t103+t75*
t111)*t87*t115+(t17*t117+t55*t119+t75*t127)*t87*t131)*t189-t214*t236+t238*t262*
t189-t288*t236;
    t292 = t39*t20;
    t294 = t38*t21*t20;
    t295 = t29*t20;
    t299 = t28*t20*t32+t36*(2.0*t292+2.0*t294-2.0*t295);
    t301 = t56*t164;
    t302 = t61*t164;
    t303 = t21*t18;
    t304 = t61*t303;
    t306 = 2.0*t65*t303;
    t307 = t68*t18;
    t308 = t301-t302+t304-t306+t307;
    t310 = t56*t21;
    t311 = t61*t21;
    t312 = -t310+t311-t28+t108-t110;
    t317 = -t301+t302+t304-t306+t307;
    t321 = t38*t19;
    t322 = t321*t20;
    t326 = t28*t20*t94+t36*(2.0*t292+2.0*t322);
    t328 = t21*t22;
    t329 = t61*t328;
    t331 = 2.0*t65*t328;
    t332 = t77-t78+t329-t331+t83;
    t337 = t310-t311+t28+t108-t110;
    t339 = -t77+t78+t329-t331+t83;
    t346 = t28*t20*t121+t36*(2.0*t294-2.0*t295+2.0*t322);
    t373 = t216*((t135*t299+t142*t308+t150*t312)*t87*t89+(t135*t317+t142*t326+
t150*t332)*t87*t115+(t135*t337+t142*t339+t150*t346)*t87*t131);
    t393 = (t239*t299+t308*t243+t245*t312)*t87*t89+(t239*t317+t243*t326+t245*
t332)*t87*t115+(t239*t337+t243*t339+t245*t346)*t87*t131;
    mR_grad0[1] = t1*((t17*t299+t55*t308+t75*t312)*t87*t89+(t17*t317+t55*t326+
t75*t332)*t87*t115+(t17*t337+t55*t339+t75*t346)*t87*t131)*t189-t214*t373+t238*
t393*t189-t288*t373;
    t400 = t38*t23*t22;
    t401 = t29*t22;
    t402 = t41*t22;
    t406 = t28*t22*t32+t36*(2.0*t400-2.0*t401+2.0*t402);
    t408 = t56*t23;
    t409 = t61*t23;
    t410 = t408-t409+t28+t108-t110;
    t412 = t23*t18;
    t413 = t61*t412;
    t415 = 2.0*t65*t412;
    t416 = -t301+t302+t413-t415+t307;
    t421 = -t408+t409-t28+t108-t110;
    t425 = t22*t321;
    t429 = t28*t22*t94+t36*(2.0*t400-2.0*t401+2.0*t425);
    t431 = t23*t20;
    t432 = t61*t431;
    t434 = 2.0*t65*t431;
    t435 = t58-t62+t432-t434+t69;
    t440 = t301-t302+t413-t415+t307;
    t442 = -t58+t62+t432-t434+t69;
    t449 = t28*t22*t121+t36*(2.0*t402+2.0*t425);
    t476 = t216*((t135*t406+t142*t410+t150*t416)*t87*t89+(t135*t421+t142*t429+
t150*t435)*t87*t115+(t135*t440+t142*t442+t150*t449)*t87*t131);
    t496 = (t239*t406+t243*t410+t245*t416)*t87*t89+(t239*t421+t243*t429+t245*
t435)*t87*t115+(t239*t440+t243*t442+t245*t449)*t87*t131;
    mR_grad0[2] = t1*((t17*t406+t55*t410+t75*t416)*t87*t89+(t17*t421+t55*t429+
t75*t435)*t87*t115+(t17*t440+t55*t442+t75*t449)*t87*t131)*t189-t214*t476+t238*
t496*t189-t288*t476;
    t502 = t216*t135;
    mR_grad0[3] = t1*t17*t189-t502*t214+t238*t239*t189-t288*t502;
    t509 = t216*t142;
    mR_grad0[4] = t1*t55*t189-t214*t509+t238*t243*t189-t288*t509;
    t516 = t150*t216;
    mR_grad0[5] = t1*t75*t189-t214*t516+t238*t245*t189-t288*t516;
    t531 = t216*(t155*t89+t168*t115+t178*t131);
    t536 = t268*t89+t274*t115+t131*t280;
    mR_grad0[6] = t1*(t194*t89+t200*t115+t206*t131)*t189-t214*t531+t238*t536*
t189-t288*t531;
    t540 = KR[4];
    t543 = t540*t287;
    mR_grad1[0] = t540*t262*t189-t543*t236;
    mR_grad1[1] = t540*t393*t189-t543*t373;
    mR_grad1[2] = t540*t496*t189-t543*t476;
    mR_grad1[3] = t540*t239*t189-t543*t502;
    mR_grad1[4] = t540*t243*t189-t543*t509;
    mR_grad1[5] = t540*t245*t189-t543*t516;
    mR_grad1[6] = t540*t536*t189-t543*t531;
    return;
  }
}


/* combined with the chain rule, the next two functions are equivalent to calc_poseProjRTJac() */

#include <math.h>
void calc_poseProjPJac(double p[12],double M[3],double m_grad[2][12])
{
  double t1;
  double t11;
  double t12;
  double t21;
  double t22;
  double t23;
  double t35;
  double t5;
  double t8;
  {
    t1 = M[0];
    t5 = M[1];
    t8 = M[2];
    t11 = p[8]*t1+p[9]*t5+p[10]*t8+p[11];
    t12 = 1/t11;
    m_grad[0][0] = t1*t12;
    m_grad[0][1] = t5*t12;
    m_grad[0][2] = t8*t12;
    m_grad[0][3] = t12;
    m_grad[0][4] = 0.0;
    m_grad[0][5] = 0.0;
    m_grad[0][6] = 0.0;
    m_grad[0][7] = 0.0;
    t21 = t11*t11;
    t22 = 1/t21;
    t23 = (p[0]*t1+p[1]*t5+p[2]*t8+p[3])*t22;
    m_grad[0][8] = -t23*t1;
    m_grad[0][9] = -t23*t5;
    m_grad[0][10] = -t23*t8;
    m_grad[0][11] = -t23;
    m_grad[1][0] = 0.0;
    m_grad[1][1] = 0.0;
    m_grad[1][2] = 0.0;
    m_grad[1][3] = 0.0;
    m_grad[1][4] = m_grad[0][0];
    m_grad[1][5] = m_grad[0][1];
    m_grad[1][6] = m_grad[0][2];
    m_grad[1][7] = m_grad[0][3];
    t35 = (p[4]*t1+p[5]*t5+p[6]*t8+p[7])*t22;
    m_grad[1][8] = -t35*t1;
    m_grad[1][9] = -t35*t5;
    m_grad[1][10] = -t35*t8;
    m_grad[1][11] = -t35;
    return;
  }
}

#include <math.h>
void calc_posePRTJac(double K[9],double rt[6],double p_grad[12][6])
{
  double t1;
  double t10;
  double t100;
  double t101;
  double t102;
  double t104;
  double t105;
  double t107;
  double t108;
  double t112;
  double t113;
  double t117;
  double t118;
  double t12;
  double t122;
  double t124;
  double t125;
  double t126;
  double t13;
  double t132;
  double t133;
  double t137;
  double t139;
  double t14;
  double t140;
  double t142;
  double t143;
  double t149;
  double t15;
  double t153;
  double t155;
  double t156;
  double t158;
  double t159;
  double t16;
  double t163;
  double t165;
  double t171;
  double t175;
  double t182;
  double t186;
  double t19;
  double t193;
  double t195;
  double t197;
  double t2;
  double t20;
  double t21;
  double t22;
  double t23;
  double t24;
  double t25;
  double t26;
  double t3;
  double t32;
  double t33;
  double t34;
  double t35;
  double t38;
  double t39;
  double t4;
  double t40;
  double t41;
  double t42;
  double t44;
  double t45;
  double t46;
  double t47;
  double t49;
  double t5;
  double t50;
  double t51;
  double t52;
  double t53;
  double t54;
  double t56;
  double t57;
  double t58;
  double t6;
  double t62;
  double t64;
  double t65;
  double t7;
  double t71;
  double t72;
  double t73;
  double t74;
  double t75;
  double t77;
  double t78;
  double t79;
  double t8;
  double t81;
  double t82;
  double t83;
  double t84;
  double t86;
  double t87;
  double t9;
  double t92;
  double t93;
  double t94;
  {
    t1 = K[0];
    t2 = rt[0];
    t3 = t2*t2;
    t4 = rt[1];
    t5 = t4*t4;
    t6 = rt[2];
    t7 = t6*t6;
    t8 = t3+t5+t7;
    t9 = sqrt(t8);
    t10 = sin(t9);
    t12 = t10/t9;
    t13 = 1/t8;
    t14 = t13*t7;
    t15 = t13*t5;
    t16 = -t14-t15;
    t19 = cos(t9);
    t20 = 1.0-t19;
    t21 = t8*t8;
    t22 = 1/t21;
    t23 = t22*t7;
    t24 = t23*t2;
    t25 = t22*t5;
    t26 = t25*t2;
    t32 = K[1];
    t33 = t19*t13;
    t34 = t2*t6;
    t35 = t33*t34;
    t38 = t10/t9/t8;
    t39 = t38*t34;
    t40 = t3*t4;
    t41 = t38*t40;
    t42 = t20*t22;
    t44 = 2.0*t42*t40;
    t45 = t20*t13;
    t46 = t45*t4;
    t47 = t35-t39+t41-t44+t46;
    t49 = K[2];
    t50 = t2*t4;
    t51 = t33*t50;
    t52 = t38*t50;
    t53 = t3*t6;
    t54 = t38*t53;
    t56 = 2.0*t42*t53;
    t57 = t45*t6;
    t58 = -t51+t52+t54-t56+t57;
    p_grad[0][0] = t1*(t12*t2*t16+t20*(2.0*t24+2.0*t26))+t32*t47+t49*t58;
    t62 = t23*t4;
    t64 = t22*t5*t4;
    t65 = t13*t4;
    t71 = t4*t6;
    t72 = t33*t71;
    t73 = t38*t71;
    t74 = t5*t2;
    t75 = t38*t74;
    t77 = 2.0*t42*t74;
    t78 = t45*t2;
    t79 = t72-t73+t75-t77+t78;
    t81 = t33*t5;
    t82 = t38*t5;
    t83 = t71*t2;
    t84 = t38*t83;
    t86 = 2.0*t42*t83;
    t87 = -t81+t82-t12+t84-t86;
    p_grad[0][1] = t1*(t12*t4*t16+t20*(2.0*t62+2.0*t64-2.0*t65))+t32*t79+t49*
t87;
    t92 = t22*t7*t6;
    t93 = t13*t6;
    t94 = t25*t6;
    t100 = t33*t7;
    t101 = t38*t7;
    t102 = t100-t101+t12+t84-t86;
    t104 = t7*t2;
    t105 = t38*t104;
    t107 = 2.0*t42*t104;
    t108 = -t72+t73+t105-t107+t78;
    p_grad[0][2] = t1*(t12*t6*t16+t20*(2.0*t92-2.0*t93+2.0*t94))+t32*t102+t49*
t108;
    p_grad[0][3] = 0.0;
    p_grad[0][4] = 0.0;
    p_grad[0][5] = 0.0;
    t112 = t13*t3;
    t113 = -t14-t112;
    t117 = t22*t3*t2;
    t118 = t13*t2;
    t122 = t12*t2*t113+t20*(2.0*t24+2.0*t117-2.0*t118);
    t124 = t33*t3;
    t125 = t38*t3;
    t126 = t124-t125+t12+t84-t86;
    p_grad[1][0] = t1*(-t35+t39+t41-t44+t46)+t32*t122+t49*t126;
    t132 = t22*t3;
    t133 = t132*t4;
    t137 = t12*t4*t113+t20*(2.0*t62+2.0*t133);
    t139 = t5*t6;
    t140 = t38*t139;
    t142 = 2.0*t42*t139;
    t143 = t51-t52+t140-t142+t57;
    p_grad[1][1] = t1*(-t72+t73+t75-t77+t78)+t32*t137+t49*t143;
    t149 = t132*t6;
    t153 = t12*t6*t113+t20*(2.0*t92-2.0*t93+2.0*t149);
    t155 = t7*t4;
    t156 = t38*t155;
    t158 = 2.0*t42*t155;
    t159 = t35-t39+t156-t158+t46;
    p_grad[1][2] = t1*(-t100+t101-t12+t84-t86)+t32*t153+t49*t159;
    p_grad[1][3] = 0.0;
    p_grad[1][4] = 0.0;
    p_grad[1][5] = 0.0;
    t163 = -t124+t125-t12+t84-t86;
    t165 = -t15-t112;
    t171 = t12*t2*t165+t20*(2.0*t26+2.0*t117-2.0*t118);
    p_grad[2][0] = t1*(t51-t52+t54-t56+t57)+t32*t163+t49*t171;
    t175 = -t51+t52+t140-t142+t57;
    t182 = t12*t4*t165+t20*(2.0*t64-2.0*t65+2.0*t133);
    p_grad[2][1] = t1*(t81-t82+t12+t84-t86)+t32*t175+t49*t182;
    t186 = -t35+t39+t156-t158+t46;
    t193 = t12*t6*t165+t20*(2.0*t94+2.0*t149);
    p_grad[2][2] = t1*(t72-t73+t105-t107+t78)+t32*t186+t49*t193;
    p_grad[2][3] = 0.0;
    p_grad[2][4] = 0.0;
    p_grad[2][5] = 0.0;
    p_grad[3][0] = 0.0;
    p_grad[3][1] = 0.0;
    p_grad[3][2] = 0.0;
    p_grad[3][3] = t1;
    p_grad[3][4] = t32;
    p_grad[3][5] = t49;
    t195 = K[4];
    t197 = K[5];
    p_grad[4][0] = t195*t47+t197*t58;
    p_grad[4][1] = t195*t79+t197*t87;
    p_grad[4][2] = t195*t102+t197*t108;
    p_grad[4][3] = 0.0;
    p_grad[4][4] = 0.0;
    p_grad[4][5] = 0.0;
    p_grad[5][0] = t195*t122+t197*t126;
    p_grad[5][1] = t195*t137+t197*t143;
    p_grad[5][2] = t195*t153+t197*t159;
    p_grad[5][3] = 0.0;
    p_grad[5][4] = 0.0;
    p_grad[5][5] = 0.0;
    p_grad[6][0] = t195*t163+t197*t171;
    p_grad[6][1] = t195*t175+t197*t182;
    p_grad[6][2] = t195*t186+t197*t193;
    p_grad[6][3] = 0.0;
    p_grad[6][4] = 0.0;
    p_grad[6][5] = 0.0;
    p_grad[7][0] = 0.0;
    p_grad[7][1] = 0.0;
    p_grad[7][2] = 0.0;
    p_grad[7][3] = 0.0;
    p_grad[7][4] = t195;
    p_grad[7][5] = t197;
    p_grad[8][0] = t58;
    p_grad[8][1] = t87;
    p_grad[8][2] = t108;
    p_grad[8][3] = 0.0;
    p_grad[8][4] = 0.0;
    p_grad[8][5] = 0.0;
    p_grad[9][0] = t126;
    p_grad[9][1] = t143;
    p_grad[9][2] = t159;
    p_grad[9][3] = 0.0;
    p_grad[9][4] = 0.0;
    p_grad[9][5] = 0.0;
    p_grad[10][0] = t171;
    p_grad[10][1] = t182;
    p_grad[10][2] = t193;
    p_grad[10][3] = 0.0;
    p_grad[10][4] = 0.0;
    p_grad[10][5] = 0.0;
    p_grad[11][0] = 0.0;
    p_grad[11][1] = 0.0;
    p_grad[11][2] = 0.0;
    p_grad[11][3] = 0.0;
    p_grad[11][4] = 0.0;
    p_grad[11][5] = 1.0;
    return;
  }
}

